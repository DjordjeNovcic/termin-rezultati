<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8">
  <title>Admin – Rezultati</title>
  <script type="module" src="firebase.mjs"></script>
  <style>
    body { font-family: Arial; max-width: 400px; margin: 20px auto; }
    input, button { width: 100%; padding: 12px; margin: 8px 0; }
  </style>
</head>
<body>

<h2>Dodaj rezultat (Crveni vs Plavi)</h2>
<button onclick="logout()">Logout</button>

<label>Datum meča:</label>
<input id="matchDate" type="date">

<label>Golovi – Crveni:</label>
<input id="red" type="number" placeholder="Crveni">

<label>Golovi – Plavi:</label>
<input id="blue" type="number" placeholder="Plavi">

<button onclick="saveMatch()">Sačuvaj rezultat</button>

<script type="module">
  if (!localStorage.getItem("admin")) {
    window.location.href = "login.html";
  }

  function saveMatch() {
    const red = document.getElementById("red").value;
    const blue = document.getElementById("blue").value;
    let date = document.getElementById("matchDate").value;

    if (!red || !blue) {
      alert("Popuni golove!");
      return;
    }

    // Ako nije izabran datum → današnji
    if (!date) {
      const today = new Date();
      date = today.toISOString().split("T")[0]; // yyyy-mm-dd
    }

    window.pushTo("matches", {
      red: Number(red),
      blue: Number(blue),
      date: date,
      time: Date.now()
    });

    alert("Sačuvano!");

    document.getElementById("red").value = "";
    document.getElementById("blue").value = "";
    document.getElementById("matchDate").value = "";
  }

  window.logout = function() {
    localStorage.removeItem("admin");
    window.location.href = "login.html";
  };
</script>

</body>
</html>
